(function(){"use strict";var t={5175:function(t,e,a){var n=a(9242),i=a(7729),s=a(2483),c=a(9511),o=a(4700),r=a.n(o);function l(t){return t>=1e3?t/1e3+" км.":`${t} м.`}function u(t){let e="";return t>60&&(e+=r()(Math.floor(t/60),"%d час ","%d часа ","%d часов ")),e+=r()(t%60,"%d минута","%d минуты","%d минут"),e}Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};var f=a(65),d=(a(7658),a(3396)),p=a(4870),h=a(5558),m=a(7139),v=a(3573),w=a.p+"img/cafe_placeholder.c93b8dc5.png";const _=t=>((0,d.dD)("data-v-437282e8"),t=t(),(0,d.Cn)(),t),b={class:"col-12 sm:col-6 lg:col-12 xl:col-4 p-2"},g={class:"p-4 border-1 surface-border surface-card border-round"},y={class:"flex flex-wrap align-items-center justify-content-between gap-2"},k={class:"flex align-items-center gap-2"},C=_((()=>(0,d._)("i",{class:"pi pi-clock"},null,-1))),x={class:"font-semibold"},S={class:"flex flex-column align-items-center gap-3 py-5"},U=["src","alt"],j={class:"text-2xl font-bold"},Z={class:"flex justify-content-end"};var O={__name:"CafeList",props:{cafeList:Array,onClick:Function},setup(t){const e=t;return(a,n)=>((0,d.wg)(),(0,d.j4)((0,p.SU)(v.Z),{value:e.cafeList,paginator:!0,layout:"list",rows:10},{list:(0,d.w5)((e=>[(0,d._)("div",b,[(0,d._)("div",g,[(0,d._)("div",y,[(0,d._)("div",k,[C,(0,d._)("span",x,(0,m.zw)(`${(0,p.SU)(u)(e.data.time)} (${(0,p.SU)(l)(e.data.distance)})`),1)])]),(0,d._)("div",S,[(0,d._)("img",{class:"w-9 shadow-2 border-round",src:e.data.photo?e.data.photo:(0,p.SU)(w),alt:e.data.name},null,8,U),(0,d._)("div",j,(0,m.zw)(e.data.name),1)]),(0,d._)("div",Z,[(0,d.Wm)((0,p.SU)(h.Z),{label:"Подробнее",icon:"pi pi-info-circle",rounded:"",onClick:a=>t.onClick(e.data.id)},null,8,["onClick"])])])])])),_:1},8,["value"]))}},T=a(89);const W=(0,T.Z)(O,[["__scopeId","data-v-437282e8"]]);var P=W;const $={class:"random"};var M={__name:"MainPage",setup(t){const e=(0,f.oR)(),a=(0,s.tv)();async function n(t){await a.push(`/cafe/${t}`)}async function i(){await a.push(`/cafe/${e.state.cafes.random().id}`)}return(0,d.bv)((async()=>{e.state.cafes||await e.dispatch("fetchCafes")})),(t,a)=>((0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d._)("span",$,[(0,d.Wm)((0,p.SU)(h.Z),{label:"Выбрать случайное",icon:"pi pi-search",onClick:i})]),(0,d.Wm)(P,{"cafe-list":(0,p.SU)(e).state.cafes,"on-click":n},null,8,["cafe-list"])],64))}};const z=(0,T.Z)(M,[["__scopeId","data-v-b916c572"]]);var D=z,F=a(606);const I=["src"],Y={class:"content"};var H={__name:"CafeInfo",props:{cafe:Object},setup(t){const e=t,a=(0,p.qj)({descriptionFields:[]});return(0,d.YP)(e,(()=>{a.descriptionFields=[{shouldShow:t=>t.landmark,title:"Как найти:",toText:t=>t.landmark},{shouldShow:t=>t.price&&t.business_lunch,title:"Бизнес-ланч:",toText:t=>`${t.price} ₽`},{shouldShow:t=>t.cuisine,title:"Кухня:",toText:t=>t.cuisine},{shouldShow:t=>t.distance,title:"Расстояние:",toText:t=>l(t.distance)},{shouldShow:t=>t.time,title:"Идти пешком:",toText:t=>u(t.time)}]}),{immediate:!0}),(e,n)=>((0,d.wg)(),(0,d.j4)((0,p.SU)(F.Z),null,{header:(0,d.w5)((()=>[(0,d._)("img",{class:"photo",src:t.cafe.photo?t.cafe.photo:(0,p.SU)(w),alt:"Фото"},null,8,I)])),title:(0,d.w5)((()=>[(0,d.Uk)((0,m.zw)(t.cafe.name),1)])),subtitle:(0,d.w5)((()=>[(0,d.Uk)((0,m.zw)(t.cafe.address),1)])),content:(0,d.w5)((()=>[(0,d._)("div",Y,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(a.descriptionFields.filter((e=>e.shouldShow(t.cafe))),(e=>((0,d.wg)(),(0,d.iD)("span",{key:e.title,class:"description"},[(0,d._)("strong",null,(0,m.zw)(e.title),1),(0,d.Uk)(" "+(0,m.zw)(e.toText(t.cafe)),1)])))),128))])])),_:1}))}};const L=(0,T.Z)(H,[["__scopeId","data-v-3aa9337b"]]);var A=L,R=a(3435),q=a(8613);const E={class:"controls"};var K={__name:"CafePage",async setup(t){let e,a;const n=(0,s.yj)(),i=(0,s.tv)(),c=(0,f.oR)(),o=(0,R.p)();async function r(){c.state.cafes||await c.dispatch("fetchCafes");let t=c.state.cafes.random().id;while(t===c.state.cafe.id)t=c.state.cafes.random().id;return await i.push(`/cafe/${t}`)}async function l(){await navigator.clipboard.writeText(window.location),o.add({summary:"Успешно!",detail:"Ссылка на кафе успешно скопирована",severity:"success"})}function u(){i.push("/")}async function m(){const t=c.getters.getCafe(n.params.id);t||await c.dispatch("fetchCafe",n.params.id)}return[e,a]=(0,d.mv)((()=>m())),await e,a(),(0,d.YP)((()=>n.params.id),(async()=>{await m()})),(t,e)=>((0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d.Wm)((0,p.SU)(q.Z)),(0,d.Wm)(A,{cafe:(0,p.SU)(c).state.cafe},null,8,["cafe"]),(0,d._)("span",E,[(0,d.Wm)((0,p.SU)(h.Z),{label:"Другое место",icon:"pi pi-search",onClick:e[0]||(e[0]=t=>r())}),(0,d.Wm)((0,p.SU)(h.Z),{label:"Скопировать ссылку",icon:"pi pi-paperclip",severity:"secondary",onClick:e[1]||(e[1]=t=>l())}),(0,d.Wm)((0,p.SU)(h.Z),{label:"К списку",icon:"pi pi-list",severity:"warning",onClick:e[2]||(e[2]=t=>u())})])],64))}};const B=(0,T.Z)(K,[["__scopeId","data-v-0142fb44"]]);var G=B;function J(t,e){const a=(0,d.up)("router-view");return(0,d.wg)(),(0,d.j4)(d.n4,null,{default:(0,d.w5)((()=>[(0,d.Wm)(a)])),_:1})}const N={},Q=(0,T.Z)(N,[["render",J]]);var V=Q;const X=(0,n.ri)(V),tt=new s.p7({routes:[{path:"/",name:"Main",component:D},{path:"/cafe/:id",name:"cafe",component:G}],history:(0,s.PO)()}),et=(0,f.MT)({state(){return{cafe:null,cafes:null}},getters:{getCafe:t=>e=>{if(t.cafe&&t.cafe.id===e)return t.cafe;const a=t.cafes?.find((t=>t.id===e));return a||null}},actions:{fetchCafes:async t=>{const e=await fetch("https://bandaumnikov.ru/api/test/site/get-index"),a=await e.json();t.commit("setCafes",a.data)},fetchCafe:async(t,e)=>{const a=await fetch(`https://bandaumnikov.ru/api/test/site/get-view?id=${e}`),n=await a.json();t.commit("setCurrentCafe",n.data)}},mutations:{setCafes(t,e){t.cafes=e},setCurrentCafe(t,e){t.cafe=e}}});X.use(i.ZP),X.use(tt),X.use(c.Z),X.use(et),X.mount("#app")}},e={};function a(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,n,i,s){if(!n){var c=1/0;for(u=0;u<t.length;u++){n=t[u][0],i=t[u][1],s=t[u][2];for(var o=!0,r=0;r<n.length;r++)(!1&s||c>=s)&&Object.keys(a.O).every((function(t){return a.O[t](n[r])}))?n.splice(r--,1):(o=!1,s<c&&(c=s));if(o){t.splice(u--,1);var l=i();void 0!==l&&(e=l)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[n,i,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p="/banda_umnikov_test_task/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,s,c=n[0],o=n[1],r=n[2],l=0;if(c.some((function(e){return 0!==t[e]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(r)var u=r(a)}for(e&&e(n);l<c.length;l++)s=c[l],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(u)},n=self["webpackChunkbanda_umnikov_test_task"]=self["webpackChunkbanda_umnikov_test_task"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(5175)}));n=a.O(n)})();
//# sourceMappingURL=app.56dc95f6.js.map